<div>
<p align="center" style="font-size=14pt;ยfont-weight: bolder;">ะะะะะกะขะะะกะขะะ ะะะฃะะ ะ ะะซะกะจะะะ ะะะะะะะะะะะฏ ะะะกะกะะะกะะะ ะคะะะะะะฆะะ
<br>
ะคะตะดะตัะฐะปัะฝะพะต ะณะพััะดะฐัััะฒะตะฝะฝะพะต ะฑัะดะถะตัะฝะพะต ัััะตะถะดะตะฝะธะต ะฒัััะตะณะพ ะพะฑัะฐะทะพะฒะฐะฝะธั
<br>
ยซะงัะฒะฐััะบะธะน ะณะพััะดะฐัััะฒะตะฝะฝัะน ัะฝะธะฒะตััะธัะตั ะ.ะ. ะฃะปััะฝะพะฒะฐยป
<br>
ะคะฐะบัะปััะตั ะธะฝัะพัะผะฐัะธะบะธ ะธ ะฒััะธัะปะธัะตะปัะฝะพะน ัะตัะฝะธะบะธ 
<br>
ะะฐัะตะดัะฐ ะฒััะธัะปะธัะตะปัะฝะพะน ัะตัะฝะธะบะธ
<br> <br> <br> <br> <br> <br> <br><br> <br> <br>
ะะฐัะฐะปะปะตะปัะฝะพะต ะฟัะพะณัะฐะผะผะธัะพะฒะฐะฝะธะต
<br>
ะะฐะฑะพัะฐัะพัะฝะฐั ัะฐะฑะพัะฐ 4
<br>
ะัะฟะพะปะฝะตะฝะธะต ะทะฐะดะฐะฝะธะน ั 21 - 26
</p>

<br> <br> <br> <br><br> <br><br>

<span>
<p align="right" style="font-size=14pt; font-weight: bolder;">ะัะฟะพะปะฝะธะป:</p>
<p align="right" style="font-size=14pt;">ะกััะดะตะฝั ะณััะฟะฟั ะะะข-41-20 <br>
ะะฐะปะบะธะฝ ะ.ะก.
</p>
</span> <br>

<span>
<p align="right" style="font-size=14pt; font-weight: bolder;">ะัะพะฒะตัะธะป:</p>
<p align="right" style="font-size=14pt;">ะะพะฒะฐะปะตะฒ ะก.B.</p>
</span>

<br> <br>
<br> <br>
<br> <br>
<br> <br>
<p align="center" style="font-size=10pt;">ะงะตะฑะพะบัะฐัั, 2024</p>
<div style="page-break-after:always;ย visibility:hidden"></div>
</div>

### ะฆะตะปั ัะฐะฑะพัั (ะขะตัะฝะพะปะพะณะธั ะฟัะพะณัะฐะผะผะธัะพะฒะฐะฝะธั ะฒ MPI):

#### ะะฐะดะฐะฝะธะต 21. ะะพะผะผัะฝะธะบะฐัะธั "ัะพัะบะฐ-ัะพัะบะฐ" (ััะตะผะฐ "ัะดะฒะธะณ" ะฟะพ ะบะพะปััั):

> [!info] ะะฐะดะฐะฝะธะต ะดะปั ะฒัะฟะพะปะฝะตะฝะธั
> ะะฐะฟะธัะธัะต MPI-ะฟัะพะณัะฐะผะผั, ัะตะฐะปะธะทััััั ะฟัะธ ะฟะพะผะพัะธ ะฑะปะพะบะธััััะธั ััะฝะบัะธะน ะฟะพััะปะบะธ ัะพะพะฑัะตะฝะธะน ัะธะฟะฐ ัะพัะบะฐ-ัะพัะบะฐ ััะตะผั ะบะพะผะผัะฝะธะบะฐัะธะธ ะฟัะพัะตััะพะฒ "ัะดะฒะธะณ ะฟะพ ะบะพะปััั", ะฒ ะบะพัะพัะพะน ะพัััะตััะฒะปััััั ะพะดะฝะพะฒัะตะผะตะฝะฝัะต ะฟะพััะปะบะฐ ะธ ะฟัะธะตะผ ัะพะพะฑัะตะฝะธะน ะฒัะตะผะธ ะฟัะพัะตััะฐะผะธ. ะ ะบะฐัะตััะฒะต ะฟะตัะตะดะฐะฒะฐะตะผะพะณะพ ัะพะพะฑัะตะฝะธั ะธัะฟะพะปัะทัะนัะต ะฝะพะผะตั ะฟัะพัะตััะฐ.

![[CleanShot 2024-02-13 at 10.40.19@2x.png]]

**ะัะพะดะฝัะต ะดะฐะฝะฝัะต:** ะฝะตั
**ะััะพะดะฝัะต ะดะฐะฝะฝัะต:** "[<ะฝะพะผะตั_ะฟัะพัะตััะฐ>]: receive message '<ัะพะพะฑัะตะฝะธะต>'"

| ะัะพะดะฝัะต ะดะฐะฝะฝัะต | ะััะพะดะฝัะต ะดะฐะฝะฝัะต (4 ะฟัะพัะตััะฐ) |
| ---- | ---- |
|  | 1. : receive message '3'<br>2. : receive message '0'<br>3. : receive message '1'<br>4. : receive message '2' |

**ะะพะปะฝัะน ัะตะบัั ะฟัะพะณัะฐะผะผั:**

1. ะะปะฐัั Main

```cs
var lab7 = new Lab7("Lab7", args);  
lab7.Start();
```

<div style="page-break-after:always;ย visibility:hidden"></div>

2. ะะปะฐัั Lab7

```cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using MPI;
using ProgramMPI.Interfaces;

namespace ProgramMPI.Labs
{
ย ย public class Lab7 : ILab
ย ย {
ย ย ย ย public string Name { get; set; }
ย ย ย ย public string[] _args { get; set; }

ย ย ย ย public Lab7(string name, string[] args)
ย ย ย ย {
ย ย ย ย ย ย Name = name;
ย ย ย ย ย ย _args = args;
ย ย ย ย }

ย ย ย ย public void ProccessStart(string[] args)
ย ย ย ย {
ย ย ย ย ย ย using (new MPI.Environment(ref args))
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย Intracommunicator comm = Communicator.world;

ย ย ย ย ย ย ย ย int rank = comm.Rank;
ย ย ย ย ย ย ย ย int size = comm.Size;

ย ย ย ย ย ย ย ย // ะะฟัะตะดะตะปะตะฝะธะต ะฝะพะผะตัะฐ ะฟัะพัะตััะฐ, ะบะพัะพัะพะผั ะฝัะถะฝะพ ะพัะฟัะฐะฒะธัั ัะพะพะฑัะตะฝะธะต
ย ย ย ย ย ย ย ย int dest = (rank + 1) % size;
ย ย ย ย ย ย ย ย // ะะฟัะตะดะตะปะตะฝะธะต ะฝะพะผะตัะฐ ะฟัะพัะตััะฐ, ะพั ะบะพัะพัะพะณะพ ะฝัะถะฝะพ ะฟัะธะฝััั ัะพะพะฑัะตะฝะธะต
ย ย ย ย ย ย ย ย int source = (rank - 1 + size) % size;

ย ย ย ย ย ย ย ย // ะัะฟัะฐะฒะบะฐ ะฝะพะผะตัะฐ ัะฒะพะตะณะพ ะฟัะพัะตััะฐ ัะปะตะดัััะตะผั ะฟัะพัะตััั ะฒ ะบะพะปััะต

ย ย ย ย ย ย ย ย comm.Send(rank, dest, 0);

ย ย ย ย ย ย ย ย // ะะพะปััะตะฝะธะต ัะพะพะฑัะตะฝะธั ะพั ะฟัะตะดัะดััะตะณะพ ะฟัะพัะตััะฐ ะฒ ะบะพะปััะต
ย ย ย ย ย ย ย ย int receivedRank = comm.Receive<int>(source, 0);

ย ย ย ย ย ย ย ย Print(comm.Rank, receivedRank);
ย ย ย ย ย ย }
ย ย ย ย }
ย ย ย ย 
ย ย ย ย public void Start()
ย ย ย ย {
ย ย ย ย ย ย Console.WriteLine(this);

ย ย ย ย ย ย ProccessStart(_args);

ย ย ย ย ย ย Console.WriteLine("\n");
ย ย ย ย }

ย ย ย ย public override string ToString() => $"{Name} started classes:";

ย ย ย ย private void Print(int rank, int receivedMessage) =>
ย ย ย ย ย ย Console.WriteLine($"[{rank + 1}]: received message: '{receivedMessage}'");

ย ย }
}
```

**ะะตะทัะปััะฐั:**

![[CleanShot 2024-02-13 at 10.43.25@2x.png]]

<div style="page-break-after:always;ย visibility:hidden"></div>

#### ะะฐะดะฐะฝะธะต 22.  ะะพะผะผัะฝะธะบะฐัะธะธ "ัะพัะบะฐ-ัะพัะบะฐ" (ะบะฐะถะดัะน ะบะฐะถะดะพะผั):

> [!info] ะะฐะดะฐะฝะธะต ะดะปั ะฒัะฟะพะปะฝะตะฝะธั
> ะะฐะฟะธัะธัะต MPI-ะฟัะพะณัะฐะผะผั, ัะตะฐะปะธะทััััั ะฟัะธ ะฟะพะผะพัะธ ะฑะปะพะบะธััััะธั ััะฝะบัะธะน ะฟะพััะปะบะธ ัะพะพะฑัะตะฝะธะน ัะธะฟะฐ ัะพัะบะฐ-ัะพัะบะฐ ััะตะผั ะบะพะผะผัะฝะธะบะฐัะธะธ ะฟัะพัะตั- ัะพะฒ ยซะบะฐะถะดัะน ะบะฐะถะดะพะผัยป, ะฒ ะบะพัะพัะพะน ะพัััะตััะฒะปัะตััั ะฟะตัะตััะปะบะฐ ัะพะพะฑัะตะฝะธั ะพั ะบะฐะถะดะพะณะพ ะฟัะพัะตััะฐ ะบะฐะถะดะพะผั (ัะผ. ัะธั. 4). ะ ะบะฐัะตััะฒะต ะฟะตัะตะดะฐะฒะฐะตะผะพะณะพ ัะพะพะฑัะตะฝะธั ะธัะฟะพะปัะทัะนัะต ะฝะพะผะตั ะฟัะพัะตััะฐ. ะะฐะถะดัะน ะฟัะพัะตัั ะดะพะปะถะตะฝ ะฒัะฒะตััะธ ะฝะฐ ัะบัะฐะฝ ะฒัะต ะฟะพะปััะตะฝะฝัะต ัะพะพะฑัะตะฝะธั.

![[CleanShot 2024-02-13 at 10.47.19@2x.png]]

**ะัะพะดะฝัะต ะดะฐะฝะฝัะต:** ะฝะตั
**ะััะพะดะฝัะต ะดะฐะฝะฝัะต:** ะบะฐะถะดัะน ะฟัะพัะตัั ะฒัะฒะพะดะธั ัะพะพะฑัะตะฝะธะต "[<ะฝะพะผะตั_ะฟัะพัะตััะฐ>]: receive message '<ัะพะพะฑัะตะฝะธะต>' from <ะฝะพะผะตั_ะฟัะพัะตััะฐ>"

| ะัะพะดะฝัะต ะดะฐะฝะฝัะต | ะััะพะดะฝัะต ะดะฐะฝะฝัะต (3 ะฟัะพัะตััะฐ) |
| ---- | ---- |
|  | [0]: receive message '1' from 1<br>1. : receive message '2' from 2<br>2. : receive message '0' from 0<br>1. : receive message '2' from 2<br>2. : receive message '0' from 0<br>[2]: receive message '1' from 1 |

<div style="page-break-after:always;ย visibility:hidden"></div>

**ะะพะปะฝัะน ัะตะบัั ะฟัะพะณัะฐะผะผั:**

1. ะะปะฐัั Main

```cs
var lab8 = new Lab8("Lab8", args);  
lab8.Start();
```

<div style="page-break-after:always;ย visibility:hidden"></div>

2. ะะปะฐัั Lab8

```cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using MPI;
using ProgramMPI.Interfaces;

namespace ProgramMPI.Labs
{
ย ย public class Lab8 : ILab
ย ย {
ย ย ย ย public string Name { get; set; }
ย ย ย ย public string[] _args { get; set; }

ย ย ย ย public Lab8(string name, string[] args)
ย ย ย ย {
ย ย ย ย ย ย Name = name;
ย ย ย ย ย ย _args = args;
ย ย ย ย }

ย ย ย ย public void ProccessStart(string[] args)
ย ย ย ย {
ย ย ย ย ย ย using (new MPI.Environment(ref args))
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย Intracommunicator comm = Communicator.world;
ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย int rank = comm.Rank;
ย ย ย ย ย ย ย ย int size = comm.Size;

ย ย ย ย ย ย ย ย for (int i = 0; i < size; i++)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย if (i != rank)
ย ย ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย ย ย // ะัะฟัะฐะฒะบะฐ ัะพะพะฑัะตะฝะธั ะพั ัะตะบััะตะณะพ ะฟัะพัะตััะฐ ะบ ะฟัะพัะตััั i
ย ย ย ย ย ย ย ย ย ย ย ย comm.Send(rank, i, 0);
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย for (int i = 0; i < size - 1; i++)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย // ะะพะปััะตะฝะธะต ัะพะพะฑัะตะฝะธั ะพั ะปัะฑะพะณะพ ะฟัะพัะตััะฐ
ย ย ย ย ย ย ย ย ย ย int receivedRank = comm.Receive<int>(Communicator.anySource, 0);

ย ย ย ย ย ย ย ย ย ย Print(comm.Rank, receivedRank);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย public void Start()
ย ย ย ย {
ย ย ย ย ย ย Console.WriteLine(this);

ย ย ย ย ย ย ProccessStart(_args);

ย ย ย ย ย ย Console.WriteLine("\n");
ย ย ย ย }

ย ย ย ย public override string ToString() => $"{Name} started classes:";

ย ย ย ย private void Print(int rank, int receivedMessage) =>

ย ย ย ย ย ย Console.WriteLine($"[{rank}]: receive message '{receivedMessage}' from {receivedMessage}");

ย ย }
}
```


**ะะตะทัะปััะฐั:**

![[CleanShot 2024-02-13 at 10.51.23@2x.png]]

<div style="page-break-after:always;ย visibility:hidden"></div>

#### ะะฐะดะฐะฝะธะต 23.  ะะพะปะปะตะบัะธะฒะฝัะต ะบะพะผะผัะฝะธะบะฐัะธะธ (ัะธัะพะบะพะฒะตัะฐัะตะปัะฝะฐั ัะฐัััะปะบะฐ ะดะฐะฝะฝัั):

> [!info] ะะฐะดะฐะฝะธะต ะดะปั ะฒัะฟะพะปะฝะตะฝะธั
> ะะทััะธัะต MPI-ััะฝะบัะธั ัะธัะพะบะพะฒะตัะฐัะตะปัะฝะพะน ัะฐัััะปะบะธ ะดะฐะฝะฝัั MPI_Bcast. ะะฐะฟะธัะธัะต MPI-ะฟัะพะณัะฐะผะผั, ะบะพัะพัะฐั ะฒ ัััะพะบะต ะดะปะธะฝั n ะพะฟัะตะดะตะปัะตั ะบะพะปะธัะตััะฒะพ ะฒัะพะถะดะตะฝะธะน ัะธะผะฒะพะปะพะฒ. ะะฒะพะด ะดะฐะฝะฝัั ะดะพะปะถะตะฝ ะพัััะตััะฒะปััััั ะฟัะพ- ัะตััะพะผ ั ะฝะพะผะตัะพะผ 0. ะะปั ัะฐัััะปะบะธ ัััะพะบะธ ะฟะพะธัะบะฐ ะธ ะตะต ะดะปะธะฝั ะฟะพ ะฟัะพัะตััะฐะผ ะธัะฟะพะปัะทัะนัะต ััะฝะบัะธั MPI_Bcast.
> 
> ะะตัะตะฟะธัะธัะต ะฟัะพะณัะฐะผะผั, ะธัะฟะพะปัะทัั ะฒะผะตััะพ ััะฝะบัะธะธ MPI_Bcast ััะฝะบัะธะธ ะบะพะผะผัะฝะธะบะฐัะธะธ ยซัะพัะบะฐ-ัะพัะบะฐยป. ะกัะฐะฒะฝะธัะต ัััะตะบัะธะฒะฝะพััั ะฒัะฟะพะปะฝะตะฝะธั ะฟัะพะณัะฐะผะผ ั ะบะพะปะปะตะบัะธะฒะฝัะผะธ ะธ ัะพัะตัะฝัะผะธ ะพะฑะผะตะฝะฐะผะธ.

**ะัะพะดะฝัะต ะดะฐะฝะฝัะต:** ัะตะปะพะต ัะธัะปะพ n (1 <= n <= 100), ัััะพะบะฐ ะธะท n ัะธะผะฒะพะปะพะฒ (ะบะฐะถะดัะน ัะธะผะฒะพะป ะฒ ัััะพะบะต ะผะพะถะตั ะฟัะตะดััะฐะฒะปััั ัะพะฑะพะน ัะพะปัะบะพ ัััะพัะฝัั ะฑัะบะฒั ะฐะฝะณะปะธะนัะบะพะณะพ ะฐะปัะฐะฒะธัะฐ)
**ะััะพะดะฝัะต ะดะฐะฝะฝัะต:** "<ะฑัะบะฒะฐ> = <ัะพะพะฑัะตะฝะธะต>"

| ะัะพะดะฝัะต ะดะฐะฝะฝัะต | ะััะพะดะฝัะต ะดะฐะฝะฝัะต |
| -------------- | --------------- |
| 9<br>aaaaaaaaa | a = 9           |
| 3<br>rvtabc               | a = 1<br>b = 1<br>c = 1<br>r = 1<br>t = 1<br>v = 1                |

**ะะพะปะฝัะน ัะตะบัั ะฟัะพะณัะฐะผะผั:**

1. ะะปะฐัั Main

```cs
var lab9 = new Lab9("Lab9", args);  
lab9.Start();

var lab9 = new Lab9("Lab9", args, true);
lab9.Start();
```

<div style="page-break-after:always;ย visibility:hidden"></div>

2. ะะปะฐัั Lab9

```cs
using MPI;
using ProgramMPI.Interfaces;

namespace ProgramMPI.Labs
{
ย ย public class Lab9 : ILab
ย ย {
ย ย ย ย public string Name { get; set; }
ย ย ย ย private string[] _args { get; set; }
ย ย ย ย private bool _isBCast { get; set; }

ย ย ย ย public Lab9(string name, string[] args, bool isBCast = false)
ย ย ย ย {
ย ย ย ย ย ย Name = name;
ย ย ย ย ย ย _args = args;
ย ย ย ย ย ย _isBCast = isBCast;
ย ย ย ย }

ย ย ย ย public void ProccessStart(string[] args)
ย ย ย ย {
ย ย ย ย ย ย using (new MPI.Environment(ref args))
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย Intracommunicator comm = Communicator.world;

ย ย ย ย ย ย ย ย int root = 0;
ย ย ย ย ย ย ย ย string inputString = null;

ย ย ย ย ย ย ย ย if (comm.Rank == root)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย Console.WriteLine("ะะฒะตะดะธัะต ัััะพะบั:");
ย ย ย ย ย ย ย ย ย ย inputString = Console.ReadLine();

ย ย ย ย ย ย ย ย ย ย // ะัะฟัะฐะฒะบะฐ ะดะปะธะฝั ัััะพะบะธ ะบะฐะถะดะพะผั ะฟัะพัะตััั
ย ย ย ย ย ย ย ย ย ย for (int i = 1; i < comm.Size; i++)
ย ย ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย ย ย comm.Send(inputString.Length, i, 0);
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย int stringLength = 0;
ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย if (comm.Rank != root)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย // ะะพะปััะตะฝะธะต ะดะปะธะฝั ัััะพะบะธ
ย ย ย ย ย ย ย ย ย ย stringLength = comm.Receive<int>(root, 0);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย else
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย stringLength = inputString.Length;
ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย char[] charArray = new char[stringLength];

ย ย ย ย ย ย ย ย if (comm.Rank == root)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย charArray = inputString.ToCharArray();
ย ย ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย ย ย // ะัะฟัะฐะฒะบะฐ ัััะพะบะธ ะบะฐะถะดะพะผั ะฟัะพัะตััั
ย ย ย ย ย ย ย ย ย ย for (int i = 1; i < comm.Size; i++)
ย ย ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย ย ย comm.Send(charArray, i, 0);
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย else
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย // ะะพะปััะตะฝะธะต ัััะพะบะธ
ย ย ย ย ย ย ย ย ย ย charArray = comm.Receive<char[]>(root, 0);
ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย // ะะพะดััะตั ัะธะผะฒะพะปะพะฒ
ย ย ย ย ย ย ย ย Dictionary<char, int> charCount = new Dictionary<char, int>();
ย ย ย ย ย ย ย ย foreach (char c in charArray)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย if (charCount.ContainsKey(c))
ย ย ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย ย ย charCount[c]++;
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย ย ย else
ย ย ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย ย ย charCount.Add(c, 1);
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย // ะัะฒะพะด ัะตะทัะปััะฐัะพะฒ
ย ย ย ย ย ย ย ย foreach (var entry in charCount)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย Print(entry.Key, entry.Value);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย private void ProccessStartBCast(string[] args)
ย ย ย ย {
ย ย ย ย ย ย using (new MPI.Environment(ref args))
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย Intracommunicator comm = Communicator.world;

ย ย ย ย ย ย ย ย int root = 0; // ะัะพัะตัั, ะพัััะตััะฒะปัััะธะน ะฒะฒะพะด ะธ ะฝะฐัะฐะปัะฝัั ัะฐัััะปะบั ะดะฐะฝะฝัั
ย ย ย ย ย ย ย ย string inputString = null;

ย ย ย ย ย ย ย ย if (comm.Rank == root)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย Console.WriteLine("ะะฒะตะดะธัะต ัััะพะบั:");
ย ย ย ย ย ย ย ย ย ย inputString = Console.ReadLine(); // ะะฒะพะด ัััะพะบะธ ะฟัะพัะตััะพะผ 0
ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย // ะะฐัััะปะบะฐ ะดะปะธะฝั ัััะพะบะธ ะฒัะตะผ ะฟัะพัะตััะฐะผ
ย ย ย ย ย ย ย ย int stringLength = inputString?.Length ?? 0;
ย ย ย ย ย ย ย ย comm.Broadcast(ref stringLength, root);

ย ย ย ย ย ย ย ย // ะะฝะธัะธะฐะปะธะทะฐัะธั ะผะฐััะธะฒะฐ ัะธะผะฒะพะปะพะฒ ะดะปั ะฟัะธะตะผะฐ ัััะพะบะธ
ย ย ย ย ย ย ย ย char[] charArray = new char[stringLength];

ย ย ย ย ย ย ย ย if (comm.Rank == root)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย charArray = inputString.ToCharArray();
ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย // ะะฐัััะปะบะฐ ัะฐะผะพะน ัััะพะบะธ ะฒัะตะผ ะฟัะพัะตััะฐะผ
ย ย ย ย ย ย ย ย comm.Broadcast(ref charArray, root);

ย ย ย ย ย ย ย ย // ะะพะดััะตั ัะธะผะฒะพะปะพะฒ
ย ย ย ย ย ย ย ย Dictionary<char, int> charCount = new Dictionary<char, int>();
ย ย ย ย ย ย ย ย foreach (char c in charArray)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย if (charCount.ContainsKey(c))
ย ย ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย ย ย charCount[c]++;
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย ย ย else
ย ย ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย ย ย charCount.Add(c, 1);
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย // ะัะฒะพะด ัะตะทัะปััะฐัะพะฒ
ย ย ย ย ย ย ย ย foreach (var entry in charCount)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย Print(entry.Key, entry.Value);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย public void Start()
ย ย ย ย {
ย ย ย ย ย ย Console.WriteLine(this);
ย ย ย ย ย ย 
ย ย ย ย ย ย if (!_isBCast)
ย ย ย ย ย ย ย ย ProccessStart(_args);
ย ย ย ย ย ย else
ย ย ย ย ย ย ย ย ProccessStartBCast(_args);

ย ย ย ย ย ย Console.WriteLine("\n");
ย ย ย ย }

ย ย ย ย public override string ToString() => $"{Name} started classes:";

ย ย ย ย private void Print(char key, int value) =>
ย ย ย ย ย ย Console.WriteLine($"{key} = {value}");
ย ย }
}
```

<div style="page-break-after:always;ย visibility:hidden"></div>

**ะะตะทัะปััะฐั:**

![[CleanShot 2024-02-13 at 11.01.40@2x.png]]

![[CleanShot 2024-02-13 at 11.02.15@2x.png]]

<div style="page-break-after:always;ย visibility:hidden"></div>

#### ะะฐะดะฐะฝะธะต 24.  ะะพะปะปะตะบัะธะฒะฝัะต ะบะพะผะผัะฝะธะบะฐัะธะธ (ะพะฟะตัะฐัะธะธ ัะตะดัะบัะธะธ):

> [!info] ะะฐะดะฐะฝะธะต ะดะปั ะฒัะฟะพะปะฝะตะฝะธั
> ะะทััะธัะต MPI-ััะฝะบัะธั ะดะปั ะฒัะฟะพะปะฝะตะฝะธั ะพะฟะตัะฐัะธะน ัะตะดัะบัะธะธ ะฝะฐะด ะดะฐะฝ- ะฝัะผะธ, ัะฐัะฟะพะปะพะถะตะฝะฝัะผะธ ะฒ ะฐะดัะตัะฝัั ะฟัะพัััะฐะฝััะฒะฐั ัะฐะทะปะธัะฝัั ะฟัะพัะตััะพะฒ, MPI_Reduce. ะะตะฐะปะธะทัะนัะต ะฟัะพะณัะฐะผะผั ะฒััะธัะปะตะฝะธั ัะธัะปะฐ ๐ (ัะผ. ะทะฐะดะฐะฝะธะต 8), ะธั- ะฟะพะปัะทัะนัะต ััะฝะบัะธั MPI_Reduce ะดะปั ััะผะผะธัะพะฒะฐะฝะธั ัะตะทัะปััะฐัะพะฒ, ะฒััะธัะปะตะฝ- ะฝัั ะบะฐะถะดัะผ ะฟัะพัะตััะพะผ.
> 
> ะะตัะตะฟะธัะธัะต ะฟัะพะณัะฐะผะผั, ะธัะฟะพะปัะทัั ะฒะผะตััะพ ััะฝะบัะธะธ MPI_Reduce ััะฝะบัะธะธ ะบะพะผะผัะฝะธะบะฐัะธะธ ยซัะพัะบะฐ-ัะพัะบะฐยป. ะกัะฐะฒะฝะธัะต ัััะตะบัะธะฒะฝะพััั ะฒัะฟะพะปะฝะตะฝะธั ะฟัะพะณัะฐะผะผ ั ะบะพะปะปะตะบัะธะฒะฝัะผะธ ะธ ัะพัะตัะฝัะผะธ ะพะฑะผะตะฝะฐะผะธ.

**ะัะพะดะฝัะต ะดะฐะฝะฝัะต:** ะพะดะฝะพ ัะตะปะพะต ัะธัะปะพ N (ัะพัะฝะพััั ะฒััะธัะปะตะฝะธั)
**ะััะพะดะฝัะต ะดะฐะฝะฝัะต:** ะพะดะฝะพ ะฒะตัะตััะฒะตะฝะฝะพะต ัะธัะปะพ pi.

| ะัะพะดะฝัะต ะดะฐะฝะฝัะต | ะััะพะดะฝัะต ะดะฐะฝะฝัะต |
| ---- | ---- |
| 1000000000 | 3.14159265 |

**ะะพะปะฝัะน ัะตะบัั ะฟัะพะณัะฐะผะผั:**

1. ะะปะฐัั Main

```cs
var lab10 = new Lab10("Lab10", args);  
lab10.Start();
```

<div style="page-break-after:always;ย visibility:hidden"></div>

2. ะะปะฐัั Lab10

```cs
using System.Diagnostics;
using MPI;
using ProgramMPI.Interfaces;

namespace ProgramMPI.Labs
{
ย ย public class Lab10 : ILab
ย ย {
ย ย ย ย public string Name { get; set; }
ย ย ย ย private string[] _args { get; set; }
ย ย ย ย private bool _isBCast { get; set; }
ย ย ย ย private Stopwatch _stopwatch = new Stopwatch();

ย ย ย ย public Lab10(string name, string[] args, bool isBCast = false)
ย ย ย ย {
ย ย ย ย ย ย Name = name;
ย ย ย ย ย ย _args = args;
ย ย ย ย ย ย _isBCast = isBCast;
ย ย ย ย }

ย ย ย ย public void ProccessStart(string[] args)
ย ย ย ย {
ย ย ย ย ย ย //Console.WriteLine("ะะฒะตะดะธัะต ัะตะปะพะต ัะธัะปะพ N: ");
ย ย ย ย ย ย //if (!int.TryParse(Console.ReadLine(), out int N) && N <= 0)
ย ย ย ย ย ย //{
ย ย ย ย ย ย //ย ย Console.WriteLine("ะะตะบะพััะตะบัะฝัะน ะฒะฒะพะด. ะฃะฑะตะดะธัะตัั, ััะพ ะฒะฒะพะดะธัะต ะฟะพะปะพะถะธัะตะปัะฝะพะต ัะตะปะพะต ัะธัะปะพ.");
ย ย ย ย ย ย //ย ย return;
ย ย ย ย ย ย //}
ย ย ย ย ย ย 
ย ย ย ย ย ย using (new MPI.Environment(ref args))
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย _stopwatch.Start();

ย ย ย ย ย ย ย ย Intracommunicator comm = Communicator.world;
ย ย ย ย ย ย ย ย int n = 1000000, localN;
ย ย ย ย ย ย ย ย double step, sum = 0.0, pi;
ย ย ย ย ย ย ย ย step = 1.0 / n;
ย ย ย ย ย ย ย ย localN = n / comm.Size;

ย ย ย ย ย ย ย ย for (int i = comm.Rank * localN; i < (comm.Rank + 1) * localN; i++)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย double x = (i + 0.5) * step;
ย ย ย ย ย ย ย ย ย ย sum += 4.0 / (1.0 + x * x);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย double localSum = sum * step;

ย ย ย ย ย ย ย ย // ะัะฟะพะปัะทะพะฒะฐะฝะธะต MPI_Reduce ะดะปั ัะตะดัะบัะธะธ ัะตะทัะปััะฐัะพะฒ
ย ย ย ย ย ย ย ย double globalSum = comm.Reduce(localSum, Operation<double>.Add, 0);

ย ย ย ย ย ย ย ย _stopwatch.Stop();

ย ย ย ย ย ย ย ย if (comm.Rank == 0)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย pi = globalSum;
ย ย ย ย ย ย ย ย ย ย Print(pi, _stopwatch.Elapsed);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย private void ProccessStartBCast(string[] args)
ย ย ย ย {
ย ย ย ย ย ย using (new MPI.Environment(ref args))
ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย _stopwatch.Start();

ย ย ย ย ย ย ย ย Intracommunicator comm = Communicator.world;
ย ย ย ย ย ย ย ย int n = 1000000, localN;
ย ย ย ย ย ย ย ย double step, localSum = 0.0, pi = 0.0;

ย ย ย ย ย ย ย ย step = 1.0 / n;
ย ย ย ย ย ย ย ย localN = n / comm.Size;

ย ย ย ย ย ย ย ย // ะััะธัะปะตะฝะธะต ะปะพะบะฐะปัะฝะพะน ััะผะผั ะดะปั ะบะฐะถะดะพะณะพ ะฟัะพัะตััะฐ
ย ย ย ย ย ย ย ย for (int i = comm.Rank * localN; i < (comm.Rank + 1) * localN; i++)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย double x = (i + 0.5) * step;
ย ย ย ย ย ย ย ย ย ย localSum += 4.0 / (1.0 + x * x);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย localSum *= step;

ย ย ย ย ย ย ย ย if (comm.Rank == 0)
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย // ะัะพัะตัั ั ัะฐะฝะณะพะผ 0 ััะผะผะธััะตั ัะฒะพั ะปะพะบะฐะปัะฝัั ััะผะผั ะธ ะฟะพะปััะฐะตั ะทะฝะฐัะตะฝะธั ะพั ะดััะณะธั ะฟัะพัะตััะพะฒ
ย ย ย ย ย ย ย ย ย ย pi = localSum;
ย ย ย ย ย ย ย ย ย ย for (int i = 1; i < comm.Size; i++)
ย ย ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย ย ย double tempSum = comm.Receive<double>(i, 0);
ย ย ย ย ย ย ย ย ย ย ย ย pi += tempSum;
ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย ย ย _stopwatch.Stop();  

ย ย ย ย ย ย ย ย ย ย Print(pi, _stopwatch.Elapsed);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย else
ย ย ย ย ย ย ย ย {
ย ย ย ย ย ย ย ย ย ย // ะัะฟัะฐะฒะบะฐ ะปะพะบะฐะปัะฝะพะน ััะผะผั ะฟัะพัะตััั ั ัะฐะฝะณะพะผ 0
ย ย ย ย ย ย ย ย ย ย comm.Send(localSum, 0, 0);
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย public void Start()
ย ย ย ย {
ย ย ย ย ย ย Console.WriteLine(this);

ย ย ย ย ย ย if (!_isBCast)
ย ย ย ย ย ย ย ย ProccessStart(_args);
ย ย ย ย ย ย else
ย ย ย ย ย ย ย ย ProccessStartBCast(_args);

ย ย ย ย ย ย Console.WriteLine("\n");
ย ย ย ย }

ย ย ย ย public override string ToString() => $"{Name} started classes:";

ย ย ย ย private void Print(double pi, TimeSpan time) => Console.WriteLine($"Result PI = {pi}, Time = {time.Milliseconds} ะั");
ย ย ย ย 
ย ย }
}
```

**ะะตะทัะปััะฐั:**

![[CleanShot 2024-02-13 at 11.12.16@2x.png]]

![[CleanShot 2024-02-13 at 11.12.16@2x 1.png]]
<div style="page-break-after:always;ย visibility:hidden"></div>

#### ะะฐะดะฐะฝะธะต 25.  ะะพะปะปะตะบัะธะฒะฝัะต ะบะพะผะผัะฝะธะบะฐัะธะธ (ััะฝะบัะธะธ ัะฐัะฟัะตะดะตะปะตะฝะธั ะธ ัะฑะพัะฐ ะดะฐะฝะฝัั):

> [!info] ะะฐะดะฐะฝะธะต ะดะปั ะฒัะฟะพะปะฝะตะฝะธั
> ะะทััะธัะต MPI-ััะฝะบัะธะธ ัะฐัะฟัะตะดะตะปะตะฝะธั ะธ ัะฑะพัะฐ ะฑะปะพะบะพะฒ ะดะฐะฝะฝัั ะฟะพ ะฟัะพ- ัะตััะฐะผ MPI_Scatter ะธ MPI_Gather. ะะฐะฟะธัะธัะต ะฟัะพะณัะฐะผะผั, ะบะพัะพัะฐั ะฒััะธัะปัะตั ะฟัะพะธะทะฒะตะดะตะฝะธะต ะดะฒัั ะบะฒะฐะดัะฐัะฝัั ะผะฐััะธั ๐ด ร ๐ต = ะก ัะฐะทะผะตัะฐ ๐ ร ๐. ะัะฟะพะปัะทัะน- ัะต ัะพัะผัะปั, ะฟัะธะฒะตะดะตะฝะฝัั ะฒ ะทะฐะดะฐะฝะธะธ 9. ะะฒะพะด ะดะฐะฝะฝัั ะธ ะฒัะฒะพะด ัะตะทัะปััะฐัะฐ ะดะพะปะถะฝั ะพัััะตััะฒะปััััั ะฟัะพัะตััะพะผ ั ะฝะพะผะตัะพะผ 0. ะะปั ัะฐัะฟัะตะดะตะปะตะฝะธั ะผะฐััะธั _A_ ะธ _B_ ะธ ัะฑะพัะฐ ะผะฐััะธัั _ะก_ ะธัะฟะพะปัะทัะนัะต ััะฝะบัะธะน MPI_Scatter ะธ MPI_Gather.
> 
> ะะตัะตะฟะธัะธัะต ะฟัะพะณัะฐะผะผั, ะธัะฟะพะปัะทัั ะฒะผะตััะพ ััะฝะบัะธะน MPI_Scatter ะธ MPI_Gather ััะฝะบัะธะธ ะบะพะผะผัะฝะธะบะฐัะธะธ ยซัะพัะบะฐ-ัะพัะบะฐยป. ะกัะฐะฒะฝะธัะต ัััะตะบัะธะฒะฝะพััั ะฒัะฟะพะปะฝะตะฝะธั ะฟัะพะณัะฐะผะผ ั ะบะพะปะปะตะบัะธะฒะฝัะผะธ ะธ ัะพัะตัะฝัะผะธ ะพะฑะผะตะฝะฐะผะธ.

**ะัะพะดะฝัะต ะดะฐะฝะฝัะต:** ัะตะปะพะต ัะธัะปะพ _n,_ 1 โค ๐ โค 10, _n__2_ ะฒะตัะตััะฒะตะฝะฝัั ัะปะตะผะตะฝัะพะฒ ะผะฐััะธัั _A_ ะธ _n__2_ ะฒะตัะตััะฒะตะฝะฝัั ัะปะตะผะตะฝัะพะฒ ะผะฐััะธัั _B_
**ะััะพะดะฝัะต ะดะฐะฝะฝัะต:** _n__2_ ะฒะตัะตััะฒะตะฝะฝัั ัะปะตะผะตะฝัะพะฒ ะผะฐััะธัั _ะก_

| ะัะพะดะฝัะต ะดะฐะฝะฝัะต | ะััะพะดะฝัะต ะดะฐะฝะฝัะต |
| ---- | ---- |
| 2<br>1 3<br>3 8<br>5 4<br>3 0 | 14 4<br>44 16 |

**ะะพะปะฝัะน ัะตะบัั ะฟัะพะณัะฐะผะผั:**

1. ะะปะฐัั Main

```cs
var lab11 = new Lab11("Lab11", args);  
lab11.Start();  

lab11 = new Lab11("Lab11", args, true);  
lab11.Start();
```

<div style="page-break-after:always;ย visibility:hidden"></div>

2. ะะปะฐัั Lab11

```cs

```

**ะะตะทัะปััะฐั:**



<div style="page-break-after:always;ย visibility:hidden"></div>

#### ะะฐะดะฐะฝะธะต 26.  ะััะฟะฟั ะธ ะบะพะผะผัะฝะธะบะฐัะพัั:

> [!info] ะะฐะดะฐะฝะธะต ะดะปั ะฒัะฟะพะปะฝะตะฝะธั
> ะะฐะฟะธัะธัะต ะฟัะพะณัะฐะผะผั, ะฒ ะบะพัะพัะพะน ะฟัะพะธะทะฒะพะดะธััั ัะธัะพะบะพะฒะตัะฐัะตะปัะฝะฐั ัะฐั- ััะปะบะฐ ัะพะพะฑัะตะฝะธั ั ะฟะพะผะพััั ััะฝะบัะธะธ MPI_Bcast, ะฝะพ ัะพะปัะบะพ ะฟะพ ะฟัะพัะตััะฐะผ ั ัะตัะฝัะผ ะฝะพะผะตัะพะผ. ะะปั ัะฐัััะปะบะธ ัะพะพะฑัะตะฝะธั ัะพะทะดะฐะนัะต ะฝะพะฒัะน ะบะพะผะผัะฝะธะบะฐัะพั.
> 
> ะะฐะถะดัะน ะฟัะพัะตัั ะฟัะธะปะพะถะตะฝะธั ะดะพะปะถะตะฝ ะฒัะฒะพะดะธัั ะฝะฐ ัะบัะฐะฝ ยซMPI_COMM_WORLD:
> 
> "<ะฝะพะผะตั ะฟัะพัะตััะฐ ะฒ ะบะพะผะผัะฝะธะบะฐัะพัะต MPI_COMM_WORLD> from <ะบะพะปะธัะตััะฒะพ ะฟัะพัะตััะพะฒ ะฒ ะบะพะผะผัะฝะธะบะฐัะพัะต MPI_COMM_WORLD>. New comm: <ะฝะพะผะตั ะฟัะพ- ัะตััะฐ ะฒ ะฝะพะฒะพะผ ะบะพะผะผัะฝะธะบะฐัะพัะต> from <ะบะพะปะธัะตััะฒะพ ะฟัะพัะตััะพะฒ ะฒ ะฝะพะฒะพะผ ะบะพะผะผัะฝะธะบะฐัะพัะต>. Message = <ัะพะพะฑัะตะฝะธะต>"


**ะัะพะดะฝัะต ะดะฐะฝะฝัะต:** message โ ัััะพะบะฐ ั ัะพะพะฑัะตะฝะธะตะผ, ััะธััะฒะฐะตะผัะผ ัะพะปัะบะพ ะฟัะพัะตััะพะผ 0, ะบะพะปะธัะตััะฒะพ ัะธะผะฒะพะปะพะฒ ะฒ message ะพั 1 ะดะพ 10
**ะััะพะดะฝัะต ะดะฐะฝะฝัะต:** ัััะพะบะธ ะฒะธะดะฐ "MPI_COMM_WORLD: <ะฝะพะผะตั ะฟัะพัะตััะฐ ะฒ ะบะพะผะผัะฝะธะบะฐัะพัะต MPI_COMM_WORLD> from <ะบะพะปะธัะตััะฒะพ ะฟัะพัะตััะพะฒ ะฒ ะบะพะผ- ะผัะฝะธะบะฐัะพัะต MPI_COMM_WORLD>. New comm: <ะฝะพะผะตั ะฟัะพัะตััะฐ ะฒ ะฝะพะฒะพะผ ะบะพะผะผัะฝะธะบะฐัะพัะต> from <ะบะพะปะธัะตััะฒะพ ะฟัะพัะตััะพะฒ ะฒ ะฝะพะฒะพะผ ะบะพะผะผัะฝะธะบะฐัะพ- ัะต>. Message = <ัะพะพะฑัะตะฝะธะต>"

| ะัะพะดะฝัะต ะดะฐะฝะฝัะต | ะััะพะดะฝัะต ะดะฐะฝะฝัะต |
| ---- | ---- |
| A | MPI_COMM_WORLD: 0 from 3. New comm: 0 from 2. Message = A<br><br>MPI_COMM_WORLD: 1 from 3. New comm: no from no. Message = no<br><br>MPI_COMM_WORLD: 2 from 3. New comm: 1 from 2. Message = A |

**ะะพะปะฝัะน ัะตะบัั ะฟัะพะณัะฐะผะผั:**

1. ะะปะฐัั Main

```cs
var lab12 = new Lab12("Lab12", args);  
lab12.Start();  

lab12 = new Lab12("Lab12", args, true);  
lab12.Start();  
```

<div style="page-break-after:always;ย visibility:hidden"></div>

2. ะะปะฐัั Lab12

```cs
 
```

**ะะตะทัะปััะฐั:**


